---
title: "Zonebuilders"
subtitle: "Cross-platform and language-agnostic tools for generating zoning systems for urban analysis and modelling "  
author: "Robin Lovelace, Martijn Tennekes, Dustin Carlino, FOSS4G 2021"
output:
  xaringan::moon_reader:
    css: xaringan-themer.css
    nature:
      slideNumberFormat: "%current%"
      highlightStyle: github
      highlightLines: true
      ratio: 16:9
      countIncrementalSlides: true
---

```{r, eval=FALSE, echo=FALSE}
# to run these slides locally:
xaringan::inf_mr("index.Rmd")
```

```{r xaringanExtra, echo=FALSE}
# From https://github.com/gadenbuie/xaringanExtra
xaringanExtra::use_xaringan_extra(c("tile_view", "animate_css", "tachyons"))
```


```{r setup, include=FALSE}
library(tmap)
library(tidyverse)
tmap_mode("view")
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(
  fig.width=9, fig.height=3.5, fig.retina=3,
  out.width = "100%",
  # cache = TRUE,
  echo = FALSE,
  message = FALSE, 
  warning = FALSE,
  fig.show = TRUE,
  hiline = TRUE
)
```



```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo_accent(
  link_color = "blue",
  title_slide_background_color = "#FFFFFF",
  title_slide_background_size = "100%",
  title_slide_background_image = "zb_buenos_aires.png",
  title_slide_background_position = "bottom",
  title_slide_text_color = "#080808",
  primary_color = "#080808",
  secondary_color = "#FF961C",
  inverse_header_color = "#FFFFFF"
)
```

.left-column[

# Why?

- Every city has a different zoning system
- Need for consistency when doing inter-city comparisons
- Need for a general solution
- Existing 'zone-building' systems start with 'basic statistical units' (BSUs)
- Fun FOSS programming challenge!

]

--

.right-column[

## Available zones are often arbitrary

```{r, fig.height=6}
u = "https://geodata.lib.berkeley.edu/download/file/nyu-2451-34202-geojson.json"
f = "buenos_aires_official_zones.geojson"
# download.file(u, f)
zones_ba = sf::read_sf(f)
tm_shape(zones_ba) +
  tm_borders(lwd = 9) +
  tm_basemap(server = leaflet::providers$OpenStreetMap) +
  tm_scale_bar()
```

]

???

- Contents: ...

<!-- --- -->

<!-- # Early prototypes -->

---

#### Application: communicating and navigating city locations

![](https://zonebuilders.github.io/zonebuilder/articles/navigation.png)
???

 Illustration of how the ClockBoard system could be used to describe the approximate location of places. In this hypothetical example, someone is describing key places to visit in and around Leeds to someone who arrives at the train station in zone A, visits the cityâ€™s famous Roundhay Park in zone C01, before travelling for an evening meal in Bradford, in zone E09. 
 
---

## Application: exploring city scale data

![](https://zonebuilders.github.io/zonebuilder/articles/paper_files/figure-html/cityscale-1.png)

---


background-image: url(https://github.com/zonebuilders/zonebuilder/releases/download/v0.0.2.9000/cities_p1.png)
background-position: center
background-size: contain

--

#### Inter-city

#### comparisons

---

background-image: url(https://zonebuilders.github.io/zonebuilder/articles/paper_files/figure-html/intercity-1.png)
background-size: contain

#### Application: inter-city comparisons

---

# Using the ZoneBuilder software

---
## With the R package

---

## With the Rust crate

### See https://github.com/zonebuilders/zonebuilder-rust

Install Rust + cargo

```bash
cargo install zonebuilder
```

See the help with:

```{r, engine='bash', echo=TRUE}
zonebuilder -h
```

---

## With the Python package or QGIS plugin

--

# Watch this space

---

## In your web browser ðŸ¤¯



![](https://user-images.githubusercontent.com/1825120/128574211-c593377a-f7a9-44d7-b984-2857d8538a3f.gif)

---

# Next steps

.pull-left[

## Conceptually

- How much can the ClockBoard concept catch on?
- What alternative zoning systems can be imagined/created?
- How to design a zoning system incorporating multiple city centres?

]

.pull-right[

## Technologically

- Fix any outstanding bugs in R and Rust implementations
- Add features to R and Rust implemenations
- Zonebuilder implementations in other languages
  - Python, JavaScript, Julia, Go? Great geo learning exercise.
  - Interfaces to the Rust implementation, e.g. via [rextendr](https://github.com/extendr/rextendr) R package and the [pyo3](https://github.com/PyO3/pyo3) Python package
- Create standard zones ready to be used for major cities worldwide

]

---


# Thanks

- Stephan HÃ¼gel and the GeoRust community for support with the Rust code
- The broadly defined R-Spatial community for making the R package possible
- The OSGEO community and developers for making solid open source software possible

## Links

- [Paper](https://zonebuilders.github.io/zonebuilder/articles/paper.html) describing the ClockBoard zoning system, implemented with zonebuilders
- [zonebuilder R package](https://zonebuilders.github.io/zonebuilder) for building zones in R
- [zonebuilder Rust crate](https://crates.io/crates/zonebuilder) for building zones in Rust/anywhere 
- [zonebuilder web app](https://zonebuilders.github.io/zonebuilder-rust) for building zones in your browser
- [Reproducible source code](https://github.com/zonebuilders/zonebuilders.github.io/blob/master/index.Rmd)  of these slides (and the software) on GitHub
